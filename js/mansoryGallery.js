const dataGallery = [
    {
        size: 'medium',
        classSize: 'width-medium',
        image: './img/gallery/img-gallery-medium-1.jpg',
    },
    {
        size: 'large',
        classSize: 'width-large',
        image: './img/gallery/img-gallery-large-1.jpg',
    },
    [
        {
            dataId: '1'
        },
        {
            size: 'small',
            classSize: 'width-small',
            image: './img/gallery/img-gallery-medium-small-1.jpg',
        },
        {
            size: 'small',
            classSize: 'width-small',
            image: './img/gallery/img-gallery-medium-small-2.jpg',
        },
        {
            size: 'very small',
            classSize: 'width-very-small',
            image: './img/gallery/img-gallery-small-1.jpg',
        },
        {
            size: 'very small',
            classSize: 'width-very-small',
            image: './img/gallery/img-gallery-small-2.jpg',
        },
        {
            size: 'very small',
            classSize: 'width-very-small',
            image: './img/gallery/img-gallery-small-3.jpg',
        },
        {
            size: 'very small',
            classSize: 'width-very-small',
            image: './img/gallery/img-gallery-small-4.jpg',
        },
        {
            size: 'very small',
            classSize: 'width-very-small',
            image: './img/gallery/img-gallery-small-5.jpg',
        },
        {
            size: 'very small',
            classSize: 'width-very-small',
            image: './img/gallery/img-gallery-small-6.jpg',
        },
        {
            size: 'very small',
            classSize: 'width-very-small',
            image: './img/gallery/img-gallery-small-7.jpg',
        },
        {
            size: 'very small',
            classSize: 'width-very-small',
            image: './img/gallery/img-gallery-small-8.jpg',
        },
        {
            size: 'very small',
            classSize: 'width-very-small',
            image: './img/gallery/img-gallery-small-9.jpg',
        },
    ],
    {
        size: 'medium',
        classSize: 'width-medium',
        image: './img/gallery/img-gallery-medium-2.jpg',
    },
    {
        size: 'medium',
        classSize: 'width-medium',
        image: './img/gallery/img-gallery-medium-3.jpg',
    },
    {
        size: 'large',
        classSize: 'width-large',
        image: './img/gallery/img-gallery-large-2.jpg',
    },
    {
        size: 'medium',
        classSize: 'width-medium',
        image: './img/gallery/img-gallery-medium-4.jpg',
    },
    {
        size: 'medium',
        classSize: 'width-medium',
        image: './img/gallery/img-gallery-medium-5.jpg',
    },
    {
        size: 'medium',
        classSize: 'width-medium',
        image: './img/gallery/img-gallery-medium-1.jpg',
    },
    {
        size: 'large',
        classSize: 'width-large',
        image: './img/gallery/img-gallery-large-1.jpg',
    },
    [
        {
            dataId: '2'
        },
        {
            size: 'small',
            classSize: 'width-small',
            image: './img/gallery/img-gallery-medium-small-1.jpg',
        },
        {
            size: 'small',
            classSize: 'width-small',
            image: './img/gallery/img-gallery-medium-small-2.jpg',
        },
        {
            size: 'very small',
            classSize: 'width-very-small',
            image: './img/gallery/img-gallery-small-1.jpg',
        },
        {
            size: 'very small',
            classSize: 'width-very-small',
            image: './img/gallery/img-gallery-small-2.jpg',
        },
        {
            size: 'very small',
            classSize: 'width-very-small',
            image: './img/gallery/img-gallery-small-3.jpg',
        },
        {
            size: 'very small',
            classSize: 'width-very-small',
            image: './img/gallery/img-gallery-small-4.jpg',
        },
        {
            size: 'very small',
            classSize: 'width-very-small',
            image: './img/gallery/img-gallery-small-5.jpg',
        },
        {
            size: 'very small',
            classSize: 'width-very-small',
            image: './img/gallery/img-gallery-small-6.jpg',
        },
        {
            size: 'very small',
            classSize: 'width-very-small',
            image: './img/gallery/img-gallery-small-7.jpg',
        },
        {
            size: 'very small',
            classSize: 'width-very-small',
            image: './img/gallery/img-gallery-small-8.jpg',
        },
        {
            size: 'very small',
            classSize: 'width-very-small',
            image: './img/gallery/img-gallery-small-9.jpg',
        },
    ],
    {
        size: 'medium',
        classSize: 'width-medium',
        image: './img/gallery/img-gallery-medium-2.jpg',
    },
    {
        size: 'medium',
        classSize: 'width-medium',
        image: './img/gallery/img-gallery-medium-3.jpg',
    },
    {
        size: 'large',
        classSize: 'width-large',
        image: './img/gallery/img-gallery-large-2.jpg',
    },
    {
        size: 'medium',
        classSize: 'width-medium',
        image: './img/gallery/img-gallery-medium-4.jpg',
    },
    {
        size: 'medium',
        classSize: 'width-medium',
        image: './img/gallery/img-gallery-medium-5.jpg',
    },
    {
        size: 'medium',
        classSize: 'width-medium',
        image: './img/gallery/img-gallery-medium-1.jpg',
    },
    {
        size: 'large',
        classSize: 'width-large',
        image: './img/gallery/img-gallery-large-1.jpg',
    },
    [
        {
            dataId: '3'
        },
        {
            size: 'small',
            classSize: 'width-small',
            image: './img/gallery/img-gallery-medium-small-1.jpg',
        },
        {
            size: 'small',
            classSize: 'width-small',
            image: './img/gallery/img-gallery-medium-small-2.jpg',
        },
        {
            size: 'very small',
            classSize: 'width-very-small',
            image: './img/gallery/img-gallery-small-1.jpg',
        },
        {
            size: 'very small',
            classSize: 'width-very-small',
            image: './img/gallery/img-gallery-small-2.jpg',
        },
        {
            size: 'very small',
            classSize: 'width-very-small',
            image: './img/gallery/img-gallery-small-3.jpg',
        },
        {
            size: 'very small',
            classSize: 'width-very-small',
            image: './img/gallery/img-gallery-small-4.jpg',
        },
        {
            size: 'very small',
            classSize: 'width-very-small',
            image: './img/gallery/img-gallery-small-5.jpg',
        },
        {
            size: 'very small',
            classSize: 'width-very-small',
            image: './img/gallery/img-gallery-small-6.jpg',
        },
        {
            size: 'very small',
            classSize: 'width-very-small',
            image: './img/gallery/img-gallery-small-7.jpg',
        },
        {
            size: 'very small',
            classSize: 'width-very-small',
            image: './img/gallery/img-gallery-small-8.jpg',
        },
        {
            size: 'very small',
            classSize: 'width-very-small',
            image: './img/gallery/img-gallery-small-9.jpg',
        },
    ],
    {
        size: 'medium',
        classSize: 'width-medium',
        image: './img/gallery/img-gallery-medium-2.jpg',
    },
    {
        size: 'medium',
        classSize: 'width-medium',
        image: './img/gallery/img-gallery-medium-3.jpg',
    },
    {
        size: 'large',
        classSize: 'width-large',
        image: './img/gallery/img-gallery-large-2.jpg',
    },
    {
        size: 'medium',
        classSize: 'width-medium',
        image: './img/gallery/img-gallery-medium-4.jpg',
    },
    {
        size: 'medium',
        classSize: 'width-medium',
        image: './img/gallery/img-gallery-medium-5.jpg',
    },
    {
        size: 'medium',
        classSize: 'width-medium',
        image: './img/gallery/img-gallery-medium-1.jpg',
    },
    {
        size: 'large',
        classSize: 'width-large',
        image: './img/gallery/img-gallery-large-1.jpg',
    },
    [
        {
            dataId: '4'
        },
        {
            size: 'small',
            classSize: 'width-small',
            image: './img/gallery/img-gallery-medium-small-1.jpg',
        },
        {
            size: 'small',
            classSize: 'width-small',
            image: './img/gallery/img-gallery-medium-small-2.jpg',
        },
        {
            size: 'very small',
            classSize: 'width-very-small',
            image: './img/gallery/img-gallery-small-1.jpg',
        },
        {
            size: 'very small',
            classSize: 'width-very-small',
            image: './img/gallery/img-gallery-small-2.jpg',
        },
        {
            size: 'very small',
            classSize: 'width-very-small',
            image: './img/gallery/img-gallery-small-3.jpg',
        },
        {
            size: 'very small',
            classSize: 'width-very-small',
            image: './img/gallery/img-gallery-small-4.jpg',
        },
        {
            size: 'very small',
            classSize: 'width-very-small',
            image: './img/gallery/img-gallery-small-5.jpg',
        },
        {
            size: 'very small',
            classSize: 'width-very-small',
            image: './img/gallery/img-gallery-small-6.jpg',
        },
        {
            size: 'very small',
            classSize: 'width-very-small',
            image: './img/gallery/img-gallery-small-7.jpg',
        },
        {
            size: 'very small',
            classSize: 'width-very-small',
            image: './img/gallery/img-gallery-small-8.jpg',
        },
        {
            size: 'very small',
            classSize: 'width-very-small',
            image: './img/gallery/img-gallery-small-9.jpg',
        },
    ],
    {
        size: 'medium',
        classSize: 'width-medium',
        image: './img/gallery/img-gallery-medium-2.jpg',
    },
    {
        size: 'medium',
        classSize: 'width-medium',
        image: './img/gallery/img-gallery-medium-3.jpg',
    },
    {
        size: 'large',
        classSize: 'width-large',
        image: './img/gallery/img-gallery-large-2.jpg',
    },
    {
        size: 'medium',
        classSize: 'width-medium',
        image: './img/gallery/img-gallery-medium-4.jpg',
    },
    {
        size: 'medium',
        classSize: 'width-medium',
        image: './img/gallery/img-gallery-medium-5.jpg',
    },
];

const galleryContainerRender = document.querySelector('.gallery');
const galleryLoad = document.querySelector('#galleryLoad');
const loadAnimationTwo = document.querySelector('.loader-two');

const generatedGalleryItem = (obj) =>
    `<div class="gallery-item ${obj.classSize} modal-hover" style="background-image: url(${obj.image})">
        <div class="full-size-image">
            <div class="icon-scale" data-src="${obj.image}"></div>
        </div>
    </div>`;

const generatedEmbeddedContainer = (obj) =>
    `<div class="gallery-item embedded-gallery" data-gallery="${obj.dataId}"></div>`;

const generatedGalleryEmbeddedItem = (obj) =>
    `<div class="${obj.classSize} modal-hover" style="background-image: url(${obj.image})">
        <div class="full-size-image">
            <div class="icon-scale" data-src="${obj.image}"></div>
        </div>
    </div>`;

function scaleImage () {
    const iconScale = document.querySelectorAll('.icon-scale');
    const modalWrapperImage = document.querySelector('.modal-wrapper-image');
    const modalImage = document.querySelector('.modal-image');
    const iconExit = document.querySelector('.icon-exit');

    iconScale.forEach(elem => elem.addEventListener('click', (event) => {
        if(event.target) {
            modalWrapperImage.style.display = 'flex';
            modalImage.src = event.target.dataset.src;
        };
    }));

    iconExit.addEventListener('click', (event => {
        if(event.target) {
            modalWrapperImage.style.display = 'none';
        };
    }));
};

let countGallery = 7;

window.addEventListener('load', () => {
    const renderGallery = (countGallery) => {

        if(countGallery >= dataGallery.length - 1) {
            countGallery = dataGallery.length - 1;
            galleryLoad.style.display = 'none';
        }

        for (let i = 0; i <= countGallery; i++) {
            if(Array.isArray(dataGallery[i])) {
                const containerItems = generatedEmbeddedContainer(dataGallery[i][0]);
                galleryContainerRender.innerHTML += containerItems;
                const embeddedContainer = document.querySelector(`[data-gallery='${dataGallery[i][0].dataId}']`);
                dataGallery[i].forEach(embEl => {
                    if(embEl.classSize) {
                        const itemEmbeddedGallery = generatedGalleryEmbeddedItem(embEl);
                        embeddedContainer.innerHTML += itemEmbeddedGallery;
                    };
                });
            } else {
                const itemGallery = generatedGalleryItem(dataGallery[i]);
                galleryContainerRender.innerHTML += itemGallery;
            };
        };

        const containerMasonry = document.querySelector('.gallery');

        const renderMasonry = new Masonry(containerMasonry, {
            itemSelector: '.gallery-item',
            columnWidth: 378,
            gutter: 13,
        });

        scaleImage();
    };

    renderGallery(countGallery);

    galleryLoad.addEventListener('click', () => {
        galleryLoad.style.display = 'none';
        loadAnimationTwo.style.display = 'block';

        setTimeout(() => {
            loadAnimationTwo.style.display = 'none';
            countGallery += 8;
            galleryLoad.style.display = 'flex';

            const ItemAll = galleryContainerRender.querySelectorAll('*');
            ItemAll.forEach(e => e.remove());
            renderGallery(countGallery);
        },2000);
    });
});



